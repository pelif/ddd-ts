{"version":3,"sources":["../../../../../src/domain/usecase/customer/update/update.customer.integration.spec.ts"],"sourcesContent":["import { Sequelize } from \"sequelize-typescript\";\nimport CustomerModel from \"../../../../infrastructure/customer/repository/sequelize/customer.model\";\nimport CustomerRepository from \"../../../../infrastructure/customer/repository/sequelize/customer.repository\";\nimport UpdateCustomerUseCase from \"./update.customer.usecase\";\nimport Customer from \"../../../customer/entity/customer\";\nimport Address from \"../../../customer/value-object/address\";\n\ndescribe(\"Integration Test update customer\", () => {\n    let sequelize: Sequelize;\n\n    beforeEach(async () => {\n        sequelize = new Sequelize({\n            dialect: \"sqlite\",\n            storage: \":memory:\",\n            logging: false,\n            sync: { force: true },\n        });\n\n        sequelize.addModels([CustomerModel]);\n        await sequelize.sync();\n    });\n\n    afterEach(async () => {\n        await sequelize.close();\n    });\n\n    it(\"Should update a customer\", async () => {\n        const customerRepository = new CustomerRepository();\n        const usecase = new UpdateCustomerUseCase(customerRepository);\n\n        const customer = new Customer(\"123\", \"Customer 1\");\n        const address = new Address(\"Street 1\", 9781, \"Zipcode1\", \"City 1\");\n        customer.changeAddress(address);\n\n        await customerRepository.create(customer);\n\n        const input = {\n            id: \"123\",\n            name: \"Customer 2\",\n            address: {\n                street: \"Street 2\",\n                number: 9781,\n                zip: \"Zipcode2\",\n                city: \"City 2\"\n            }\n        }\n\n        const output = {\n            id: \"123\",\n            name: \"Customer 2\",\n            address: {\n                street: \"Street 2\",\n                number: 9781,\n                zip: \"Zipcode2\",\n                city: \"City 2\"\n            }\n        }\n\n        const result = await usecase.execute(input);\n\n        expect(result).toEqual(output);\n    })\n\n\n});"],"names":["Sequelize","CustomerModel","CustomerRepository","UpdateCustomerUseCase","Customer","Address","describe","sequelize","beforeEach","dialect","storage","logging","sync","force","addModels","afterEach","close","it","customerRepository","usecase","customer","address","input","output","result","changeAddress","create","id","name","street","number","zip","city","execute","expect","toEqual"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAASA,SAAS,QAAQ,uBAAuB;AACjD,OAAOC,mBAAmB,0EAA0E;AACpG,OAAOC,wBAAwB,+EAA+E;AAC9G,OAAOC,2BAA2B,4BAA4B;AAC9D,OAAOC,cAAc,oCAAoC;AACzD,OAAOC,aAAa,yCAAyC;AAE7DC,SAAS,oCAAoC;IACzC,IAAIC;IAEJC,WAAW;;;;;wBACPD,YAAY,IAAIP,UAAU;4BACtBS,SAAS;4BACTC,SAAS;4BACTC,SAAS;4BACTC,MAAM;gCAAEC,OAAO;4BAAK;wBACxB;wBAEAN,UAAUO,SAAS;4BAAEb;;wBACrB;;4BAAMM,UAAUK,IAAI;;;wBAApB;;;;;;QACJ;;IAEAG,UAAU;;;;;wBACN;;4BAAMR,UAAUS,KAAK;;;wBAArB;;;;;;QACJ;;IAEAC,GAAG,4BAA4B;;gBACrBC,oBACAC,SAEAC,UACAC,SAKAC,OAWAC,QAWAC;;;;wBA/BAN,qBAAqB,IAAIhB;wBACzBiB,UAAU,IAAIhB,sBAAsBe;wBAEpCE,WAAW,IAAIhB,SAAS,OAAO;wBAC/BiB,UAAU,IAAIhB,QAAQ,YAAY,MAAM,YAAY;wBAC1De,SAASK,aAAa,CAACJ;wBAEvB;;4BAAMH,mBAAmBQ,MAAM,CAACN;;;wBAAhC;wBAEME,QAAQ;4BACVK,IAAI;4BACJC,MAAM;4BACNP,SAAS;gCACLQ,QAAQ;gCACRC,QAAQ;gCACRC,KAAK;gCACLC,MAAM;4BACV;wBACJ;wBAEMT,SAAS;4BACXI,IAAI;4BACJC,MAAM;4BACNP,SAAS;gCACLQ,QAAQ;gCACRC,QAAQ;gCACRC,KAAK;gCACLC,MAAM;4BACV;wBACJ;wBAEe;;4BAAMb,QAAQc,OAAO,CAACX;;;wBAA/BE,SAAS;wBAEfU,OAAOV,QAAQW,OAAO,CAACZ;;;;;;QAC3B;;AAGJ"}