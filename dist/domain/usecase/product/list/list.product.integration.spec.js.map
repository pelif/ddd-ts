{"version":3,"sources":["../../../../../src/domain/usecase/product/list/list.product.integration.spec.ts"],"sourcesContent":["import { Sequelize } from \"sequelize-typescript\";\nimport ProductModel from \"../../../../infrastructure/product/repository/sequelize/product.model\";\nimport ProductRepository from \"../../../../infrastructure/product/repository/sequelize/product.repository\";\nimport ListProductUseCase from \"./list.product.usecase\";\nimport Product from \"../../../product/entity/product\";\n\ndescribe(\"Integration Test list product\", () => {\n    let sequelize: Sequelize;\n\n    beforeEach(async () => {\n        sequelize = new Sequelize({\n            dialect: \"sqlite\",\n            storage: \":memory:\",\n            logging: false,\n            sync: { force: true },\n        });\n\n        sequelize.addModels([ProductModel]);\n        await sequelize.sync();\n    });\n\n    afterEach(async () => {\n        await sequelize.close();\n    });\n\n    it(\"Should list Products\", async () => {\n        const productRepository = new ProductRepository();\n        const usecase = new ListProductUseCase(productRepository);\n\n        const product1 = new Product(\"123\", \"Product 1\", 10);\n        const product2 = new Product(\"1234\", \"Product 2\", 20);\n\n        await productRepository.create(product1);\n        await productRepository.create(product2);\n\n        const output = {\n            products: [\n                {\n                    id: \"123\",\n                    name: \"Product 1\",\n                    price: 10\n                },\n                {\n                    id: \"1234\",\n                    name: \"Product 2\",\n                    price: 20\n                }\n            ]\n        }\n\n        const result = await usecase.execute({});\n\n        expect(result).toEqual(output);\n    });\n\n}); "],"names":["Sequelize","ProductModel","ProductRepository","ListProductUseCase","Product","describe","sequelize","beforeEach","dialect","storage","logging","sync","force","addModels","afterEach","close","it","productRepository","usecase","product1","product2","output","result","create","products","id","name","price","execute","expect","toEqual"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAASA,SAAS,QAAQ,uBAAuB;AACjD,OAAOC,kBAAkB,wEAAwE;AACjG,OAAOC,uBAAuB,6EAA6E;AAC3G,OAAOC,wBAAwB,yBAAyB;AACxD,OAAOC,aAAa,kCAAkC;AAEtDC,SAAS,iCAAiC;IACtC,IAAIC;IAEJC,WAAW;;;;;wBACPD,YAAY,IAAIN,UAAU;4BACtBQ,SAAS;4BACTC,SAAS;4BACTC,SAAS;4BACTC,MAAM;gCAAEC,OAAO;4BAAK;wBACxB;wBAEAN,UAAUO,SAAS;4BAAEZ;;wBACrB;;4BAAMK,UAAUK,IAAI;;;wBAApB;;;;;;QACJ;;IAEAG,UAAU;;;;;wBACN;;4BAAMR,UAAUS,KAAK;;;wBAArB;;;;;;QACJ;;IAEAC,GAAG,wBAAwB;;gBACjBC,mBACAC,SAEAC,UACAC,UAKAC,QAeAC;;;;wBAxBAL,oBAAoB,IAAIf;wBACxBgB,UAAU,IAAIf,mBAAmBc;wBAEjCE,WAAW,IAAIf,QAAQ,OAAO,aAAa;wBAC3CgB,WAAW,IAAIhB,QAAQ,QAAQ,aAAa;wBAElD;;4BAAMa,kBAAkBM,MAAM,CAACJ;;;wBAA/B;wBACA;;4BAAMF,kBAAkBM,MAAM,CAACH;;;wBAA/B;wBAEMC,SAAS;4BACXG,QAAQ;gCACJ;oCACIC,IAAI;oCACJC,MAAM;oCACNC,OAAO;gCACX;gCACA;oCACIF,IAAI;oCACJC,MAAM;oCACNC,OAAO;gCACX;;wBAER;wBAEe;;4BAAMT,QAAQU,OAAO,CAAC,CAAC;;;wBAAhCN,SAAS;wBAEfO,OAAOP,QAAQQ,OAAO,CAACT;;;;;;QAC3B;;AAEJ"}