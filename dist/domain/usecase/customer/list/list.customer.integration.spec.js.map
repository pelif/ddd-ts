{"version":3,"sources":["../../../../../src/domain/usecase/customer/list/list.customer.integration.spec.ts"],"sourcesContent":["import { Sequelize } from \"sequelize-typescript\";\nimport CustomerModel from \"../../../../infrastructure/customer/repository/sequelize/customer.model\";\nimport CustomerRepository from \"../../../../infrastructure/customer/repository/sequelize/customer.repository\";\nimport ListCustomerUseCase from \"./list.customer.usecase\";\nimport Customer from \"../../../customer/entity/customer\";\nimport Address from \"../../../customer/value-object/address\";\n\ndescribe(\"Integration Test list customers\", () => {\n    let sequelize: Sequelize;\n\n    beforeEach(async () => {\n        sequelize = new Sequelize({\n            dialect: \"sqlite\",\n            storage: \":memory:\",\n            logging: false,\n            sync: { force: true },\n        });\n\n        sequelize.addModels([CustomerModel]);\n        await sequelize.sync();\n    });\n\n    afterEach(async () => {\n        await sequelize.close();\n    });\n\n    it(\"should list customers\", async () => {\n        const customerRepository = new CustomerRepository();\n        const usecase = new ListCustomerUseCase(customerRepository);\n\n        const customer1 = new Customer(\"123\", \"Customer 1\");\n        const address1 = new Address(\"Street 1\", 1, \"Zipcode 1\", \"City 1\");\n        customer1.changeAddress(address1);\n\n        const customer2 = new Customer(\"456\", \"Customer 2\");\n        const address2 = new Address(\"Street 2\", 2, \"Zipcode 2\", \"City 2\");\n        customer2.changeAddress(address2);\n\n        await customerRepository.create(customer1);\n        await customerRepository.create(customer2);\n\n        const output = {\n            customers: [\n                {\n                    id: \"123\",\n                    name: \"Customer 1\",\n                    address: {\n                        street: \"Street 1\",\n                        number: 1,\n                        zip: \"Zipcode 1\",\n                        city: \"City 1\"\n                    }\n                },\n                {\n                    id: \"456\",\n                    name: \"Customer 2\",\n                    address: {\n                        street: \"Street 2\",\n                        number: 2,\n                        zip: \"Zipcode 2\",\n                        city: \"City 2\"\n                    }\n                }\n            ]\n        }\n\n        const result = await usecase.execute({});\n\n        expect(result).toEqual(output);\n    });\n});"],"names":["Sequelize","CustomerModel","CustomerRepository","ListCustomerUseCase","Customer","Address","describe","sequelize","beforeEach","dialect","storage","logging","sync","force","addModels","afterEach","close","it","customerRepository","usecase","customer1","address1","customer2","address2","output","result","changeAddress","create","customers","id","name","address","street","number","zip","city","execute","expect","toEqual"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAASA,SAAS,QAAQ,uBAAuB;AACjD,OAAOC,mBAAmB,0EAA0E;AACpG,OAAOC,wBAAwB,+EAA+E;AAC9G,OAAOC,yBAAyB,0BAA0B;AAC1D,OAAOC,cAAc,oCAAoC;AACzD,OAAOC,aAAa,yCAAyC;AAE7DC,SAAS,mCAAmC;IACxC,IAAIC;IAEJC,WAAW;;;;;wBACPD,YAAY,IAAIP,UAAU;4BACtBS,SAAS;4BACTC,SAAS;4BACTC,SAAS;4BACTC,MAAM;gCAAEC,OAAO;4BAAK;wBACxB;wBAEAN,UAAUO,SAAS;4BAAEb;;wBACrB;;4BAAMM,UAAUK,IAAI;;;wBAApB;;;;;;QACJ;;IAEAG,UAAU;;;;;wBACN;;4BAAMR,UAAUS,KAAK;;;wBAArB;;;;;;QACJ;;IAEAC,GAAG,yBAAyB;;gBAClBC,oBACAC,SAEAC,WACAC,UAGAC,WACAC,UAMAC,QAyBAC;;;;wBAvCAP,qBAAqB,IAAIhB;wBACzBiB,UAAU,IAAIhB,oBAAoBe;wBAElCE,YAAY,IAAIhB,SAAS,OAAO;wBAChCiB,WAAW,IAAIhB,QAAQ,YAAY,GAAG,aAAa;wBACzDe,UAAUM,aAAa,CAACL;wBAElBC,YAAY,IAAIlB,SAAS,OAAO;wBAChCmB,WAAW,IAAIlB,QAAQ,YAAY,GAAG,aAAa;wBACzDiB,UAAUI,aAAa,CAACH;wBAExB;;4BAAML,mBAAmBS,MAAM,CAACP;;;wBAAhC;wBACA;;4BAAMF,mBAAmBS,MAAM,CAACL;;;wBAAhC;wBAEME,SAAS;4BACXI,SAAS;gCACL;oCACIC,IAAI;oCACJC,MAAM;oCACNC,SAAS;wCACLC,QAAQ;wCACRC,QAAQ;wCACRC,KAAK;wCACLC,MAAM;oCACV;gCACJ;gCACA;oCACIN,IAAI;oCACJC,MAAM;oCACNC,SAAS;wCACLC,QAAQ;wCACRC,QAAQ;wCACRC,KAAK;wCACLC,MAAM;oCACV;gCACJ;;wBAER;wBAEe;;4BAAMhB,QAAQiB,OAAO,CAAC,CAAC;;;wBAAhCX,SAAS;wBAEfY,OAAOZ,QAAQa,OAAO,CAACd;;;;;;QAC3B;;AACJ"}