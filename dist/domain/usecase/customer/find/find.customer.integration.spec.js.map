{"version":3,"sources":["../../../../../src/domain/usecase/customer/find/find.customer.integration.spec.ts"],"sourcesContent":["import { Sequelize } from \"sequelize-typescript\";\nimport CustomerModel from \"../../../../infrastructure/customer/repository/sequelize/customer.model\";\nimport CustomerRepository from \"../../../../infrastructure/customer/repository/sequelize/customer.repository\";\nimport Customer from \"../../../customer/entity/customer\";\nimport Address from \"../../../customer/value-object/address\";\nimport FindCustomerUseCase from \"./find.customer.usecase\";\n\ndescribe(\"Test find customer use case\", () => {\n\n    let sequelize: Sequelize;\n\n    beforeEach(async () => {\n        sequelize = new Sequelize({\n            dialect: 'sqlite',\n            storage: ':memory:',\n            logging: false,\n            sync: { force: true },\n        });\n\n        sequelize.addModels([CustomerModel]);\n        await sequelize.sync();\n    });\n\n    afterEach(async () => {\n        await sequelize.close();\n    });\n\n    it(\"should find a customer\", async () => {\n\n        const customer = new Customer(\"123\", \"Customer 1\");\n        const address = new Address(\"Street 1\", 9781, \"Zipcode1\", \"City 1\");\n        customer.changeAddress(address);\n\n        const customerRepository = new CustomerRepository();\n        const usecase = new FindCustomerUseCase(customerRepository);\n\n        await customerRepository.create(customer);\n\n        const input = {\n            id: \"123\"\n        }\n\n        const output = {\n            id: \"123\",\n            name: \"Customer 1\",\n            address: {\n                street: \"Street 1\",\n                number: 9781,\n                zip: \"Zipcode1\",\n                city: \"City 1\"\n            }\n        }\n\n        const result = await usecase.execute(input);\n\n        expect(result).toEqual(output);\n\n    });\n}); "],"names":["Sequelize","CustomerModel","CustomerRepository","Customer","Address","FindCustomerUseCase","describe","sequelize","beforeEach","dialect","storage","logging","sync","force","addModels","afterEach","close","it","customer","address","customerRepository","usecase","input","output","result","changeAddress","create","id","name","street","number","zip","city","execute","expect","toEqual"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAASA,SAAS,QAAQ,uBAAuB;AACjD,OAAOC,mBAAmB,0EAA0E;AACpG,OAAOC,wBAAwB,+EAA+E;AAC9G,OAAOC,cAAc,oCAAoC;AACzD,OAAOC,aAAa,yCAAyC;AAC7D,OAAOC,yBAAyB,0BAA0B;AAE1DC,SAAS,+BAA+B;IAEpC,IAAIC;IAEJC,WAAW;;;;;wBACPD,YAAY,IAAIP,UAAU;4BACtBS,SAAS;4BACTC,SAAS;4BACTC,SAAS;4BACTC,MAAM;gCAAEC,OAAO;4BAAK;wBACxB;wBAEAN,UAAUO,SAAS;4BAAEb;;wBACrB;;4BAAMM,UAAUK,IAAI;;;wBAApB;;;;;;QACJ;;IAEAG,UAAU;;;;;wBACN;;4BAAMR,UAAUS,KAAK;;;wBAArB;;;;;;QACJ;;IAEAC,GAAG,0BAA0B;;gBAEnBC,UACAC,SAGAC,oBACAC,SAIAC,OAIAC,QAWAC;;;;wBAxBAN,WAAW,IAAIf,SAAS,OAAO;wBAC/BgB,UAAU,IAAIf,QAAQ,YAAY,MAAM,YAAY;wBAC1Dc,SAASO,aAAa,CAACN;wBAEjBC,qBAAqB,IAAIlB;wBACzBmB,UAAU,IAAIhB,oBAAoBe;wBAExC;;4BAAMA,mBAAmBM,MAAM,CAACR;;;wBAAhC;wBAEMI,QAAQ;4BACVK,IAAI;wBACR;wBAEMJ,SAAS;4BACXI,IAAI;4BACJC,MAAM;4BACNT,SAAS;gCACLU,QAAQ;gCACRC,QAAQ;gCACRC,KAAK;gCACLC,MAAM;4BACV;wBACJ;wBAEe;;4BAAMX,QAAQY,OAAO,CAACX;;;wBAA/BE,SAAS;wBAEfU,OAAOV,QAAQW,OAAO,CAACZ;;;;;;QAE3B;;AACJ"}