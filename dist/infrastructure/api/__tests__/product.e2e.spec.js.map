{"version":3,"sources":["../../../../src/infrastructure/api/__tests__/product.e2e.spec.ts"],"sourcesContent":["import { app, sequelize } from '../express';\nimport request from 'supertest';\n\ndescribe(\"E2E test for Product\", () => {\n    beforeEach(async () => {\n        await sequelize.sync({ force: true });\n    });\n\n    afterAll(async () => {\n        await sequelize.close();\n    });\n\n    it(\"Should create a product\", async () => {\n        const response = await request(app)\n            .post('/product')\n            .send({\n                name: \"Product 1\",\n                price: 10,\n                type: \"a\"\n            });\n\n        expect(response.status).toBe(200);\n        expect(response.body.name).toBe(\"Product 1\");\n        expect(response.body.price).toBe(10);\n        expect(response.body.type).toBe(\"a\");\n    });\n\n    it(\"Should not create a product with invalid params\", async () => {\n        const response = await request(app)\n            .post('/product')\n            .send({\n                name: \"\",\n                price: -10,\n                type: \"a\"\n            });\n\n        expect(response.status).toBe(500);\n    });\n\n    it(\"Should list all products\", async () => {\n        const response = await request(app)\n            .post('/product')\n            .send({\n                name: \"Product 1\",\n                price: 10,\n                type: \"a\"\n            });\n\n        const response2 = await request(app)\n            .post('/product')\n            .send({\n                name: \"Product 2\",\n                price: 20,\n                type: \"b\"\n            });\n\n        const responseList = await request(app)\n            .get('/product');\n\n        expect(responseList.status).toBe(200);\n        expect(responseList.body.products.length).toBe(2);\n    });\n}); "],"names":["app","sequelize","request","describe","beforeEach","sync","force","afterAll","close","it","response","post","send","name","price","type","expect","status","toBe","body","response2","responseList","get","products","length"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAASA,GAAG,EAAEC,SAAS,QAAQ,aAAa;AAC5C,OAAOC,aAAa,YAAY;AAEhCC,SAAS,wBAAwB;IAC7BC,WAAW;;;;;wBACP;;4BAAMH,UAAUI,IAAI,CAAC;gCAAEC,OAAO;4BAAK;;;wBAAnC;;;;;;QACJ;;IAEAC,SAAS;;;;;wBACL;;4BAAMN,UAAUO,KAAK;;;wBAArB;;;;;;QACJ;;IAEAC,GAAG,2BAA2B;;gBACpBC;;;;wBAAW;;4BAAMR,QAAQF,KAC1BW,IAAI,CAAC,YACLC,IAAI,CAAC;gCACFC,MAAM;gCACNC,OAAO;gCACPC,MAAM;4BACV;;;wBANEL,WAAW;wBAQjBM,OAAON,SAASO,MAAM,EAAEC,IAAI,CAAC;wBAC7BF,OAAON,SAASS,IAAI,CAACN,IAAI,EAAEK,IAAI,CAAC;wBAChCF,OAAON,SAASS,IAAI,CAACL,KAAK,EAAEI,IAAI,CAAC;wBACjCF,OAAON,SAASS,IAAI,CAACJ,IAAI,EAAEG,IAAI,CAAC;;;;;;QACpC;;IAEAT,GAAG,mDAAmD;;gBAC5CC;;;;wBAAW;;4BAAMR,QAAQF,KAC1BW,IAAI,CAAC,YACLC,IAAI,CAAC;gCACFC,MAAM;gCACNC,OAAO,CAAC;gCACRC,MAAM;4BACV;;;wBANEL,WAAW;wBAQjBM,OAAON,SAASO,MAAM,EAAEC,IAAI,CAAC;;;;;;QACjC;;IAEAT,GAAG,4BAA4B;;gBACrBC,UAQAU,WAQAC;;;;wBAhBW;;4BAAMnB,QAAQF,KAC1BW,IAAI,CAAC,YACLC,IAAI,CAAC;gCACFC,MAAM;gCACNC,OAAO;gCACPC,MAAM;4BACV;;;wBANEL,WAAW;wBAQC;;4BAAMR,QAAQF,KAC3BW,IAAI,CAAC,YACLC,IAAI,CAAC;gCACFC,MAAM;gCACNC,OAAO;gCACPC,MAAM;4BACV;;;wBANEK,YAAY;wBAQG;;4BAAMlB,QAAQF,KAC9BsB,GAAG,CAAC;;;wBADHD,eAAe;wBAGrBL,OAAOK,aAAaJ,MAAM,EAAEC,IAAI,CAAC;wBACjCF,OAAOK,aAAaF,IAAI,CAACI,QAAQ,CAACC,MAAM,EAAEN,IAAI,CAAC;;;;;;QACnD;;AACJ"}